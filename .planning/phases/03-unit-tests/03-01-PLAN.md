---
phase: 03-unit-tests
plan: 01
type: execute
depends_on: []
files_modified: [vitest.config.ts, tests/config.test.ts, tests/utils/configStore.test.ts]
---

<objective>
Reorganize test structure from co-located tests (src/*.test.ts) to dedicated tests/ folder.

Purpose: Establish clean separation between source code and tests, making test discovery easier and following common Node.js project conventions.
Output: tests/ folder with existing tests migrated, updated vitest config.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-plan.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/codebase/TESTING.md
@.planning/codebase/CONVENTIONS.md
@vitest.config.ts
@src/config.test.ts
@src/utils/configStore.test.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create tests/ folder structure and move existing tests</name>
  <files>tests/config.test.ts, tests/utils/configStore.test.ts</files>
  <action>
1. Create tests/ directory structure:
   - tests/
   - tests/utils/

2. Move src/config.test.ts to tests/config.test.ts
   - Update import paths from './config.js' to '../src/config.js'
   - Update import paths from './utils/configStore.js' to '../src/utils/configStore.js'

3. Move src/utils/configStore.test.ts to tests/utils/configStore.test.ts
   - Update import paths from '../utils/configStore.js' to '../../src/utils/configStore.js'
   - Update any other relative imports (node:fs, node:os, node:path remain unchanged)

4. Delete the original test files from src/
  </action>
  <verify>
- ls tests/ shows config.test.ts
- ls tests/utils/ shows configStore.test.ts
- ls src/*.test.ts shows no results
- ls src/utils/*.test.ts shows no results
  </verify>
  <done>Tests moved to tests/ folder, old test files deleted from src/</done>
</task>

<task type="auto">
  <name>Task 2: Update vitest config for new test location</name>
  <files>vitest.config.ts</files>
  <action>
Update vitest.config.ts:
- Change include pattern from 'src/**/*.test.ts' to 'tests/**/*.test.ts'
- Keep coverage include pointing to 'src/**/*.ts' (we're testing src, not tests)
- Keep other settings (globals, environment, provider) unchanged
  </action>
  <verify>npm run test passes with tests found in tests/ directory</verify>
  <done>Vitest config updated, all existing tests pass from new location</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] tests/ folder exists with proper structure
- [ ] tests/config.test.ts exists with corrected imports
- [ ] tests/utils/configStore.test.ts exists with corrected imports
- [ ] No .test.ts files remain in src/
- [ ] vitest.config.ts points to tests/**/*.test.ts
- [ ] npm run test passes (all existing tests green)
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- Tests run from new location
- No test files in src/ directory
</success_criteria>

<output>
After completion, create `.planning/phases/03-unit-tests/03-01-SUMMARY.md`
</output>
